(this["webpackJsonpinrix-2021-hackathon"]=this["webpackJsonpinrix-2021-hackathon"]||[]).push([[0],{20:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(7),s=n.n(c),o=(n(20),n(4)),u=n.n(o),i=n(8),p=n(6),h=n(12),l=n(14),f=n(3);var d=function(e){var t=Object(r.useState)("red"),n=Object(p.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){e.speeding&&c("green")}),[e.speeding]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{"data-tip":"","data-for":"registerTip"+e.lat+"/"+e.lng,style:{color:"white",background:a,padding:"15px 10px",display:"inline-flex",textAlign:"center",alignItems:"center",justifyContent:"center",borderRadius:"100%",width:"".concat(.015,"rem"),height:"".concat(.015,"rem"),opacity:.75},children:e.speed}),Object(f.jsx)(l.a,{id:"registerTip"+e.lat+"/"+e.lng,place:"top",effect:"solid",children:"Street: ".concat(e.street,"\nAvg Speed: ").concat(e.avgSpeed)})]})};var g=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(1),s=Object(p.a)(c,2),o=s[0],l=s[1];Object(r.useEffect)((function(){function e(){return(e=Object(i.a)(u.a.mark((function e(){var t,n,r,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,j();case 3:return n=e.sent,e.next=6,O();case 6:for(r=e.sent,c=z(n[0],n[1],n[2],r[0],r[1],r[2]),console.log(c),5,s=0;s<c.length-5;s+=5)isNaN(c[s][2][1])||isNaN(c[s][2][0])||isNaN(c[s][3])||(o=c[s][5],c[s][3]<=25&&(o=!0),t.push({lat:c[s][2][1],lng:c[s][2][0],street:c[s][1],speed:c[s][3],speeding:o,avgSpeed:c[s][4]}));console.log(t),a(t);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var g={center:{lat:37.75,lng:-122.45},zoom:11};return Object(f.jsx)("div",{style:{height:"100vh",width:"100%"},children:function(e){return console.log(e),e>12?Object(f.jsx)(h.a,{bootstrapURLKeys:{key:"AIzaSyDIwpNgFSik6tmPDKA2yBsT_nMYXBnA7Tc"},defaultCenter:g.center,defaultZoom:g.zoom,onChange:function(t){l(t.zoom),console.log(e)},children:n.map((function(e){return Object(f.jsx)(d,{lat:e.lat,lng:e.lng,street:e.street,speed:e.speed,speeding:e.speeding,avgSpeed:e.avgSpeed},e.lat+"/"+e.lng)}))}):Object(f.jsx)(h.a,{bootstrapURLKeys:{key:"AIzaSyDIwpNgFSik6tmPDKA2yBsT_nMYXBnA7Tc"},defaultCenter:g.center,defaultZoom:g.zoom,onChange:function(t){l(t.zoom),console.log(e)}})}(o)});function j(){return b.apply(this,arguments)}function b(){return(b=Object(i.a)(u.a.mark((function e(){var t,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=new Headers,e.next=4,x();case 4:return r=e.sent,console.log(r),n.append("Authorization",r),a={method:"GET",headers:n,redirect:"follow"},e.next=10,fetch("https://api.iq.inrix.com/v1/segments/speed?box=37.858%7C-122.541,37.699%7C-122.341",a).then((function(e){return e.text()})).then((function(e){t=T(e)})).catch((function(e){return console.log("error",e)}));case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"f6rmtcl05k","ZjZybXRjbDA1a3w2YU55M3Yza2x1YW9LcFVCQWdiT1RzMXZhcFVqSXRYNjBNUVljeThm","https://api.iq.inrix.com/auth/v1/appToken?appId=f6rmtcl05k&hashToken=ZjZybXRjbDA1a3w2YU55M3Yza2x1YW9LcFVCQWdiT1RzMXZhcFVqSXRYNjBNUVljeThm",e.next=5,v("https://api.iq.inrix.com/auth/v1/appToken?appId=f6rmtcl05k&hashToken=ZjZybXRjbDA1a3w2YU55M3Yza2x1YW9LcFVCQWdiT1RzMXZhcFVqSXRYNjBNUVljeThm");case 5:return t=e.sent,n=t.result.token,e.abrupt("return","Bearer "+n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n={method:"GET",redirect:"follow"},e.next=4,fetch("https://raw.githubusercontent.com/wiebecoding/inrix-2021-hackathon/main/san_fran_segments.json",n).then((function(e){return e.text()})).then((function(e){t=k(e)})).catch((function(e){return console.log("error",e)}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(i.a)(u.a.mark((function e(t){var n,r,a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=[],a=[],c=JSON.parse(t),s=c.result.segments,console.log(s),o=0;o<s.length;o++)n.push(s[o].code),r.push(s[o].roadInfo.name),a.push(s[o].locationInfo.center.coordinates);return e.abrupt("return",[n,r,a]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(u.a.mark((function e(t){var n,r,a,c,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r=[],a=[],c=JSON.parse(t),s=c.result.segmentspeeds[0].segments,o=0;o<s.length;o++)r.push(s[o].speed),a.push(s[o].average),n.push(s[o].code);return e.abrupt("return",[n,r,a]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,n,r,a,c){for(var s=[],o=0,u=0;u<e.length;u++)for(var i=0;i<r.length;i++)if(e[u]===r[i]&&null!=a[i]&&null!=c[i]){var p=[];p.push(e[u]),p.push(a[i]),p.push(c[i]),p.push(t[u]),t[u]>o&&(o=t[u]),p.push(n[u]),t[u]>=1.1*n[u]||t[u]>=71.5?(p.push(!0),1):p.push(!1),s.push(p)}return s}},j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},b=(n(26),n(15)),x=n(2);var m=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(b.a,{children:Object(f.jsx)(x.c,{children:Object(f.jsx)(x.a,{exact:!0,path:"/",element:Object(f.jsx)(g,{})})})})})};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(m,{})}),document.getElementById("root")),j()}},[[27,1,2]]]);
//# sourceMappingURL=main.620276f8.chunk.js.map